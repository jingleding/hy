
import express from 'express'
import path from 'path'
import fs from 'fs'
import RestResult from '../RestResult'
import { getChartData, items, getUser, getItem, navs } from './mockApi'
let router = express.Router()

export default function() {

  router.post('/api/login', function(req, res) {
    let restResult = new RestResult()
    let userName = req.body.username
    let password = req.body.password
    
    //查询数据库，可选，可以通过直接调后台接口代替
    //登录成功后存储在cookie中的token
    restResult.token = 'jjdehhed99003094'
    restResult.result = 'test'
    res.send(restResult)
  })

  // mock apis
  router.get('/api/charts', (req, res)=> {
    res.send(getChartData())
  })

  router.get('/api/newsList', (req, res)=> {
    res.send(items);
  })

  router.get('/api/navs/:id', (req, res)=> {
    res.send(navs());
  })

  router.get('/api/users/:id', (req, res)=> {
    res.send(getUser(req.params.id))
  })

  router.get('/api/newdetail/:id', (req, res)=> {
    res.send(getItem(req.params.id))
  })

  return router
}